<form class="score-edit">
  <h2>View Score</h2>
  
  <!-- Match Status Warning -->
  @if (isMatchCompleted) {
    <div class="match-locked-warning">
      <mat-card class="warning-card">
        <mat-card-content>
          <div class="warning-content">
            <mat-icon class="warning-icon">lock</mat-icon>
            <div class="warning-text">
              <strong>Match Completed - Scores Locked</strong>
              <p>This score cannot be edited because the match "{{ matchName }}" is completed. 
                 To edit scores, first change the match status from "completed" to "open".</p>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  }
  
  <div class="score-view-grid">
    <div><strong>Name:</strong> <span>{{ scoreForm.get('name')?.value }}</span></div>
    <div><strong>Score:</strong> <span>{{ scoreForm.get('score')?.value }}</span></div>
    <div><strong>Posted:</strong> <span>{{ scoreForm.get('postedScore')?.value }}</span></div>
    <div><strong>Handicap:</strong> <span>{{ scoreForm.get('handicap')?.value }}</span></div>
    <div><strong>USGA Index:</strong> <span>{{ scoreForm.get('usgaIndex')?.value }}</span></div>
    <div><strong>USGA Today:</strong> <span>{{ scoreForm.get('usgaIndexForTodaysScore')?.value }}</span></div>
      <div><strong>Match:</strong> <span>{{ matchName }}</span></div>
      <div><strong>Match:</strong> <span>{{ scoreForm.get('matchName')?.value }}</span></div>
      <div><strong>Date Played:</strong> <span>{{ scoreForm.get('datePlayed')?.value | date:'mediumDate' }}</span></div>
    <div *ngIf="authorName"><strong>Author:</strong> <span>{{ authorName }}</span></div>
  </div>

  <div class="course-info-compact">
    <div><strong>Course:</strong> <span>{{ scoreForm.get('scName')?.value || 'Not specified' }}</span></div>
    <div><strong>Rating:</strong> <span>{{ scoreForm.get('scRating')?.value || 'Not specified' }}</span></div>
    <div><strong>Slope:</strong> <span>{{ scoreForm.get('scSlope')?.value || 'Not specified' }}</span></div>
  </div>

  <div class="checkbox-group-compact">
    <mat-checkbox [checked]="scoreForm.get('wonTwoBall')?.value" disabled>Two Ball</mat-checkbox>
    <mat-checkbox [checked]="scoreForm.get('wonOneBall')?.value" disabled>One Ball</mat-checkbox>
    <mat-checkbox [checked]="scoreForm.get('wonIndo')?.value" disabled>Indo</mat-checkbox>
    <mat-checkbox [checked]="scoreForm.get('isPaired')?.value" disabled>Paired</mat-checkbox>
    <mat-checkbox [checked]="scoreForm.get('isScored')?.value" disabled>Scored</mat-checkbox>
  </div>

  <div class="array-section">
    <h3>Individual Hole Scores</h3>
    <div class="hole-scores-block">
      <div class="hole-scores-table">
        <!-- Hole numbers and scores -->
        <ng-container *ngFor="let num of [].constructor(18); let i = index">
          <div class="hole-col">
            <span class="hole-number">{{ i + 1 }}</span>
            <span class="hole-score">{{ scoreForm.get('scores')?.value[i] }}</span>
          </div>
          <!-- Insert Front/Back labels after 9 and 18 -->
          <ng-container *ngIf="i === 8">
            <div class="hole-label-col front-label">
              <span class="hole-label">Front</span>
              <span class="hole-score front-score">{{ frontNineSum }}</span>
            </div>
          </ng-container>
          <ng-container *ngIf="i === 17">
            <div class="hole-label-col back-label">
              <span class="hole-label">Back</span>
              <span class="hole-score back-score">{{ backNineSum }}</span>
            </div>
            <div class="hole-label-col total-label">
              <span class="hole-label">Total</span>
              <span class="hole-score total-score">{{ totalSum }}</span>
            </div>
          </ng-container>
        </ng-container>
      </div>
    </div>
  </div>

  <div class="button-group">
    <button mat-button type="button" (click)="cancel()">Close</button>
  </div>
</form>