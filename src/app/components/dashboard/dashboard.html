
<div class="dashboard-title">
  <h1>Rochester Golf Dashboard</h1>
</div>

<div class="dashboard-container">
  <!-- Overview Section -->
  <section class="overview-section">
    <h2>Overview</h2>
    <div class="stats-grid">
      <mat-card class="stat-card profile-card">
        <mat-card-header>
          <mat-icon class="stat-icon">person</mat-icon>
          <mat-card-title>Profile</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div><b>Name:</b> {{ auth.getUserName() || 'Unknown' }}</div>
          <div><b>Email:</b> {{ auth.getUserEmail() || 'Unknown' }}</div>
          <div *ngIf="auth.getRoles().length > 0">
            <b>Authorized Role:</b> <span>{{ auth.getRoles().join(', ') }}</span>
          </div>
        </mat-card-content>
      </mat-card>
      <mat-card class="stat-card">
        <mat-card-header>
          <mat-icon class="stat-icon">group</mat-icon>
          <mat-card-title>Total Members</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="stat-number">{{ totalMembers() }}</div>
        </mat-card-content>
      </mat-card>
    </div>
  </section>

  <!-- Activity Section -->
  <section class="activity-section">
    <h2>Activity Summary</h2>
    <div class="stats-grid">
      <mat-card class="stat-card">
        <mat-card-header>
          <mat-icon class="stat-icon">groups</mat-icon>
          <mat-card-title>Groups This Year</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="stat-number">{{ groupsThisYear() }}</div>
          <div class="stat-subtitle">{{ currentYear }}</div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-header>
          <mat-icon class="stat-icon">event</mat-icon>
          <mat-card-title>Matches This Year</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="stat-number">{{ matchesThisYear() }}</div>
          <div class="stat-subtitle">{{ currentYear }}</div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card">
        <mat-card-header>
          <mat-icon class="stat-icon">history</mat-icon>
          <mat-card-title>Matches (Past 12 Months)</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="stat-number">{{ matchesPast12Months() }}</div>
          <div class="stat-subtitle">{{ twelveMonthsAgo | date:'MMM yyyy' }} - {{ currentDate | date:'MMM yyyy' }}</div>
        </mat-card-content>
      </mat-card>
    </div>
  </section>

  <!-- Most Active Players Section -->
  <section class="activity-section">
    <h2>Most Active Players (Past 12 Months)</h2>
    <div class="stats-grid">
      <mat-card class="stat-card frequent-players-card">
        <mat-card-header>
          <mat-icon class="stat-icon">people</mat-icon>
          <mat-card-title>Top 5 Players</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="frequent-players-list" *ngIf="topFrequentPlayers().length > 0; else noFrequentPlayers">
            <div class="player-item" *ngFor="let player of topFrequentPlayers(); let i = index">
              <div class="player-rank">{{ i + 1 }}</div>
              <div class="player-info">
                <div class="player-name">{{ player.memberName }}</div>
                <div class="player-rounds">{{ player.rounds }} rounds</div>
              </div>
            </div>
          </div>
          <ng-template #noFrequentPlayers>
            <div class="no-data">No recent activity</div>
          </ng-template>
        </mat-card-content>
      </mat-card>
    </div>
  </section>

  <!-- Performance Section -->
  <section class="performance-section">
    <h2>Performance Highlights</h2>
    <div class="stats-grid">
      <mat-card class="stat-card performance-card low-score">
        <mat-card-header>
          <mat-icon class="stat-icon">golf_course</mat-icon>
          <mat-card-title>Lowest Net Score</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="stat-number">{{ lowestNetScore()?.netScore || 'N/A' }}</div>
          <div class="stat-subtitle" *ngIf="lowestNetScore()">
            {{ lowestNetScore()?.memberName }}
          </div>
          <div class="stat-detail" *ngIf="lowestNetScore()">
            {{ lowestNetScore()?.datePlayed | date:'mediumDate' }}
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="stat-card performance-card high-score">
        <mat-card-header>
          <mat-icon class="stat-icon">trending_up</mat-icon>
          <mat-card-title>Highest Net Score</mat-card-title>
        </mat-card-header>
        <mat-card-content>
          <div class="stat-number">{{ highestNetScore()?.netScore || 'N/A' }}</div>
          <div class="stat-subtitle" *ngIf="highestNetScore()">
            {{ highestNetScore()?.memberName }}
          </div>
          <div class="stat-detail" *ngIf="highestNetScore()">
            {{ highestNetScore()?.datePlayed | date:'mediumDate' }}
          </div>
        </mat-card-content>
      </mat-card>
    </div>
  </section>

  <!-- Quick Actions -->
  <section class="actions-section">
    <h2>Quick Actions</h2>
    <div class="action-buttons">
      <button mat-raised-button color="primary" (click)="goTo('/members')">
        <mat-icon>group</mat-icon>
        View All Members
      </button>
      <button mat-raised-button color="primary" (click)="goTo('/matches')">
        <mat-icon>event</mat-icon>
        View All Matches
      </button>
      <button mat-raised-button color="primary" (click)="goTo('/scores')">
        <mat-icon>golf_course</mat-icon>
        View All Scores
      </button>
      <button mat-raised-button color="accent" (click)="goTo('/admin/configuration')">
        <mat-icon>settings</mat-icon>
        Configuration
      </button>
    </div>
  </section>
</div>

