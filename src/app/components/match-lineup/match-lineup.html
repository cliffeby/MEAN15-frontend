<!-- Pair Teams button will be moved to lineup-header -->

<div *ngIf="pairingMode" class="paired-teams-layout">
	<div *ngFor="let group of pairedTeams; let gIdx = index" class="paired-group-row">
		<div class="paired-team-col left">
			<span class="ab-label">A:</span>
			<ng-container *ngIf="getMemberById(group.teamA[0]) as memberA; else showIdA">
				{{ getCompactNameWithIndex(memberA) }}
			</ng-container>
			<ng-template #showIdA>{{ group.teamA[0] }}</ng-template>
			<span class="ab-label">B:</span>
			<ng-container *ngIf="getMemberById(group.teamA[1]) as memberB; else showIdB">
				{{ getCompactNameWithIndex(memberB) }}
			</ng-container>
			<ng-template #showIdB>{{ group.teamA[1] }}</ng-template>
			<span class="team-index">({{ group.combinedA }})</span>
		</div>
		<div class="vs-label">vs</div>
		<div class="paired-team-col right">
			<span class="ab-label">A:</span>
			<ng-container *ngIf="getMemberById(group.teamB[0]) as memberA2; else showIdA2">
				{{ getCompactNameWithIndex(memberA2) }}
			</ng-container>
			<ng-template #showIdA2>{{ group.teamB[0] }}</ng-template>
			<span class="ab-label">B:</span>
			<ng-container *ngIf="getMemberById(group.teamB[1]) as memberB2; else showIdB2">
				{{ getCompactNameWithIndex(memberB2) }}
			</ng-container>
			<ng-template #showIdB2>{{ group.teamB[1] }}</ng-template>
			<span class="team-index">({{ group.combinedB }})</span>
		</div>
	</div>
</div>
<div class="lineup-header" style="display: flex; align-items: center; gap: 1em;">
	<button mat-raised-button color="accent" type="button" (click)="onAddMembers()" class="select-members-btn">
		<mat-icon>group_add</mat-icon>
		Add Members
	</button>
	<button mat-raised-button color="primary" type="button" (click)="pairFourballTeams()" class="pair-teams-btn">
		Pair Teams
	</button>
	<button *ngIf="pairingMode" mat-button type="button" (click)="exitPairing()">Exit Pairing</button>
</div>
<div class="current-lineup" *ngIf="!pairingMode">
	<h4>Current Lineup ({{ lineUpsArray.length }} members)</h4>
	<p *ngIf="lineUpsArray.length === 0" class="no-members">No members added to lineup yet</p>
	<div *ngIf="members.length">
		<div *ngIf="lineUpsArray.length > 0" class="lineup-compact">
			<ng-container *ngFor="let memberControl of lineUpsArray.controls; let i = index">
				<div *ngIf="i % 4 === 0" class="member-group">
					<div class="member-group-box">
						<span class="member-names">
							<ng-container *ngFor="let j of [0,1,2,3]; let isLast = last">
								<ng-container *ngIf="lineUpsArray.controls[i + j] as control">
									<ng-container *ngIf="getMemberById(control.value) as member; else showId">
										{{ getCompactNameWithIndex(member) }}
									</ng-container>
									<ng-template #showId>{{ control.value }}</ng-template>
									<span *ngIf="!isLast && lineUpsArray.controls[i + j + 1]"> : </span>
								</ng-container>
							</ng-container>
						</span>
						<button mat-icon-button type="button" color="warn" (click)="onRemoveGroup(i)" class="group-remove-btn">
							<span>Ã—</span>
						</button>
					</div>
				</div>
			</ng-container>
		</div>
	</div>
</div>

