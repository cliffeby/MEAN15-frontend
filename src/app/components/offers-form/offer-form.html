<div style="text-align:center">
  <h1>Dynamic Driven Forms with NgRX</h1>
</div>
<mat-card class="offer-form-card">
  <mat-card-header style="margin-bottom:20px">
    <mat-card-title>{{ offerId ? 'Edit Offer' : 'Add New Offer' }}</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="offerForm" (ngSubmit)="onSubmit()" class="vertical-form">

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Title</mat-label>
        <input matInput formControlName="title" placeholder="Enter offer title" />
        <mat-error *ngIf="offerForm.get('title')?.touched && offerForm.get('title')?.invalid">
          Title is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Description</mat-label>
        <textarea matInput formControlName="description" rows="3" placeholder="Enter offer description"></textarea>
        <mat-error *ngIf="offerForm.get('description')?.touched && offerForm.get('description')?.invalid">
          Description is required
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Interest Rate (%)</mat-label>
        <input matInput type="number" formControlName="interestRate" min="0" placeholder="Enter interest rate" />
        <mat-error *ngIf="offerForm.get('interestRate')?.touched && offerForm.get('interestRate')?.invalid">
          Interest rate must be 0 or higher
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline" class="full-width">
        <mat-label>Valid Till</mat-label>
        <input matInput type="date" formControlName="validTill" />
        <mat-error *ngIf="offerForm.get('validTill')?.touched && offerForm.get('validTill')?.invalid">
          Valid till date is required
        </mat-error>
      </mat-form-field>

      <div class="form-buttons">
        <button mat-raised-button color="primary" type="submit" [disabled]="offerForm.invalid">
          {{ offerId ? 'Update Offer' : 'Create Offer' }}
        </button>

        <button mat-stroked-button color="warn" type="button" (click)="router.navigate(['/offers'])">
          Cancel
        </button>
      </div>
    </form>
  </mat-card-content>
</mat-card>
